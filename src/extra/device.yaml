# viessmann devices specification
# version 0.1 : format may vari in futur.

# links : 
#  - https://openv.wikispaces.com/Ger%C3%A4te (devices lists with device-id)
#  - https://openv.wikispaces.com/Adressen    (devices addresses)
# 
# TODO : 
# - support multiple device description, or includes.
# - add ro and rw mode for addresses

device:
  device_id:	0x20CB
  product_id:   ScotHO1
  controler:	Vitodens200

enums:
  mode: [
   'water heating only', 
   'continuous reduced', 
   'constant normal', 
   'heating and hot water',
   'heating and hot water', 
   'Off']
  switching_valve: ['undefined', 'heating', 'middle position', 'hot water']

# field formats :
# name: [address, type, multiplier, 'unit']
# name: [address, enum-type, enum-name]
# supported types : :byte, :short, :int4, :bool, :percent, :addr, :systime ; todo :enum.
# multiplier : default 1 ; temperature are expressed in 1/10° ; so we need to correct this.

addr:

  # settings
  norm_room_temp:    [0x2306, rw, byte, '°']
  reduce_room_temp:  [0x2307, rw, byte]

  mode:              [0x2323, rw, enum, mode]
  party_mode:        [0x2330, rw, bool]
  eco_mode:          [0x2331, rw, bool]

  # temperatures
  indoor_temp:       [0x0800, ro, short, 10, '°']
  outdoor_temp:      [0x0896, ro, short, 10, '°']
  boiler_temp:       [0x0802, ro, short, 10, '°']

  # info:
  device_id:  [0x00F8, ro, addr]
  starts:     [0x088A, ro, int4]
  runtime:    [0x08A7, ro, int4]
  power:      [0xA38F, ro, percent, 2]


addr_long:
  norm_room_temp:
    addr:	0x2306
    type:	byte,rw
    range: [3, 37]
    unit:	'°'
    cat:	[temp, setting]
    # mult:	1   (default to 1)
    description: indoor temperature setting

  reduce_room_temp:
    addr:	0x2307
    type:	byte,rw
    range: [3, 37]
    unit:	'°'
    cat:	[temp, setting]
    description: indoor temperature setting for the night and holidays

  mode:
    addr:	0x2323
    type:	enum, rw
    description:  active mode
    range: [0, 4]
    cat:	[setting, mode]
    enums: [
     'water heating only', 
     'continuous reduced', 
     'constant normal', 
     'heating and hot water',
     'heating and hot water', 
     'Off']
     
  # eco mode and party_mode lasts only 12 hours
  eco_mode:
    addr:	0x2330
    type:	bool, rw
    range: [0, 1]
    cat:	[setting, mode]
    description:  economic mode

  party_mode:
    addr:	0x2331
    type:	bool,rw
    range: [0, 1]
    cat:	[setting, mode]
    description:  party mode 

  indoor_temp:
    addr:	0x0800
    type:	short,ro
    mult:	10
    unit:	'°'
    cat:	[temp, info]
    description:  indoor temperature

  outdoor_temp:
    addr:	0x0896
    type:	short,ro
    range: [-60, 60]
    mult:	10
    unit:	'°'
    cat:	[temp, info]
    description:  outdoor temperature

  boiler_temp:
    addr:	0x0802
    type:	short,ro
    range: [0, 150]
    mult:	10
    unit:	'°'
    cat:	[temp, info]
    description:  boiler temperature
  
  device_id:
    addr:	0x00F8
    type:	addr,ro
    cat:	[info, system]
    description:  device ID

  starts:
    addr:	0x088A
    type:	int4,ro
    range: [0, 1150000]
    cat:	[info, system]
    description:  number of starts

  runtime:
    addr:	0x08A7
    type:	int4,ro
    range: [0, 1150000]
    cat:	[info, system]
    unit:	's'
    description:  working time in seconds

  power:
    addr:	0xA38F
    type:	percent,ro
    range: [0, 100]
    mult:	2
    unit:	'%'
    cat:	[info, system]
    description:  heating power in percent

